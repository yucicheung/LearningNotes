# 死锁
- 在计算机系统中有很多独占性的资源，在任一时刻都只能被一个进程使用，如打印机等，因为会引起混乱。因此，操作系统都具有授权一个进程(临时)排他性地访问某一种资源的能力。
- **死锁(deadlock)**：举例，两个进程准备分别将扫描的文档记录到蓝光光盘上，进程A请求使用扫描仪被授权，进程B首先请求的蓝光光盘刻录机也被授权使用。当A请求光盘刻录机时，该请求在B释放蓝光光盘刻录机前会被拒绝，而B不放弃刻录器反而去请求扫描仪，就会导致两个进程被阻塞，并且一直处于这种状态，这种情况就是**死锁。**
- 软硬件资源都有可能出现死锁，只要有资源的排他性独占存在。

## 资源
- **资源**定义：在进程对设备、文件等取得了排他性访问权时，有可能会出现死锁，因此这类**需要排他性使用的对象**就称为资源。
  - 可以是硬件设备或一组信息。
  - 简单来说，资源就是随着时间的推移，必须能够获得、使用以及释放的任何东西。
### 可抢占和不可抢占资源
- **可抢占资源(preemptable resource)**：可以从拥有它的进程中抢占而不会产生任何副作用。
  - 存储器就是一类可抢占的资源。
  - 可抢占资源的潜在死锁，通常可以通过在进程之间重新分配资源而化解。
- **不可抢占资源(nonpreemptable resource)**：指不引起相关的计算失败的情况下，无法把它从占有它的进程处抢占过来。
  - 蓝光光盘刻录机就是一类不可抢占资源。
  - **死锁与不可抢占资源有关**。

- 资源是否可抢占取决于上下文环境(具体情况具体分析)。

- 使用一个资源所需要的时间顺序可以用抽象的形式表示如下：
  1. **请求资源**
	- 如请求时资源不可用，则请求进程被迫等待。
	  - 一些系统中，资源请求失败进程会自动被阻塞，在资源可用时再唤醒它;
	  - 在其他系统中，资源请求失败会返回一个错误代码，请求的进程会等待一段时间，然后重试。
	- 当一个进程请求资源失败时，通常会处于这样一个循环中：请求资源、休眠、再请求(这个进程虽然没有被阻塞，但是因为不能做任何有价值的工作，因此和阻塞状态一样)
	- 请求资源的过程是非常依赖于系统
	  - 某些系统中，提供了request系统调用，用于允许进程资源请求;
	  - 另一些系统中，OS只知道资源是一些特殊文件，在任何时刻最多只能被一个进程打开。一般情况下，这些特殊文件用open打开，如果文件正在被使用，则发出open调用的进程会被阻塞，直到文件的当前使用者关闭该文件为止。
  2. **使用资源**
  3. **释放资源**
