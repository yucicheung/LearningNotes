# 检索数据
- 笔记中所有语句都基于文件夹*MySQL*下的命令建立的数据库*tysql*上进行操作。
## 摘要
- 如何使用`SELECT`语句从表中检索单个、多个和所有表列。
- 如何使用`DISTINCT`返回不同的值。
- 如何注释代码。

## SELECT语句
- 关键字(keyword)
  - 作为SQL组成部分的保留字;
  - 关键字不能用作表或列的名字。
- SQL语句是由一个或多个*关键字*(一些简单的英语单词)构成的。
- SELECT语句大概是最常使用的SQL语句了;
  - 用途：从一个或多个表中检索信息。

## 检索单个列
```sql
SELECT prod_name FROM FROM Products
```
- 说明：未排序数据
  - 在没有明确排序查询结果时，返回的数据顺序没有特定的顺序;
  - 只要返回相同数目的行，就是正常的。
- 提示：结束SQL语句
  - 多条SQL语句必须以分号分隔，多数DBMS不需要在单条SQL语句后加分号(*但是在命令行下必须加上`;`标识语句的结束*);
  - 加上分号肯定没有坏处。
- 提示SQL语句和大小写
  - SQL语句不区分大小写，如`SELECT`和`select`一致;
  - 开发人员为使代码易于调试和阅读，常采用**SQL关键字大写，对列名和表名使用小写**;
  - 尽管SQL语句不区分大小写，依据DBMS的不同，列名、表名和值是区分大小写的。
- 提示:使用空格
  - 处理SQL语句时，会忽略所有空格。
  - 猜想：多余空格会被忽略，只需要一个空格作分隔符。
  - 开发人员认为SQL语句分为多行更易于阅读和调试。
## 检索多个列
```sql
SELECT prod_id,prod_name,prod_price FROM Products;
```
- 在`SELECT`之后要给出多个列名，中间用`，`分隔。
- 提示：当心逗号
  - 多个列名之间应当加上逗号;
  - 最后一个列名后不加逗号，否则出错。
- 说明：数据表示
  - SQL语句一般返回原始的、无格式的数据;
  - 数据的格式化是表示问题，而不是检索问题;
  - 表示格式一般在现实该数据的应用程序中规定。
## 检索所有列
```SQL
SELECT * FROM Products;
```
- 在列名的位置使用星号(*)通配符表示所有列;
- 注意：使用通配符
  - 除非确实需要表中的每一列，否则使用通配符可能会降低检索和应用程序的性能。
- 提示：检索未知列
  - 通配符的一大好处是，可以检索出名字未知的列。
## 检索不同的值
```sql
SELECT DISTINCT vend_id FROM Products;
```
- `DISTINCT`关键字指示数据库只返回检索的列中不同的值(可以理解为返回检索列中的值的并集)。
- 注意：不能部分使用DISTINCT
  - DISTINCT关键字作用于所有的列，不仅仅是跟在它后面的一列(即多个列的组合值作为一个整体要保持不相同)。
## 限制结果
```sql
SELECT prod_name FROM Products LIMIT 5 -- 返回不超过5行的数据(从第0行开始)，相当于OFFSET 0
SELECT prod_name FROM Products LIMIT 5 OFFSET 5 -- 返回从第5行开始的不超过5行的数据(如果剩下数据不足5行则显示不足5行)
```
- 以上语句适用*MySQl*/*MariaDB*/*PostreSQL*/*SQLite*。
- 注意：第0行
  - 第一个被检索的行是第0行。
- 提示：MySQL、MariaDB和SQLite捷径
  - 上述3种DBMS支持简化的`LIMIT 4 OFFSET 3`语句，为`LIMIT 3,4`，**逗号前为OFFSET值，逗号后为LIMIT值**。
- 说明：并非所有SQL实现都一样
  - SQL有很多功能都有一致的实现，但这不是一定的,就比如这个功能在其他DBMS上的实现。
### 在其他DBMS中的SQL实现
- *SQL Server*和*Access*中使用`TOP`关键字来限制最多返回多少行：
  ```sql
  SELECT TOP 5 prod_name FROM Products;
  ```
- *DB2*中使用如下语句：
  ```sql
  SELECT prod_name
  FROM Products
  FETCH FIRST 5 ROWS ONLY;
  ```
- *Oracle*中基于*ROWNUM*(行计数器)计算行：
  ```sql
  SELECT prod_name
  FROM Products
  WHERE ROWNUM <=5;
  ```
## 使用注释
- 使用注释的原因：
  - 为程序增加描述性注释;
  - SQL开始处内容可能需要包含程序员描述方式、程序描述和一些说明等;
  - 当只想运行程序的一部分时，可以将其他行注释掉。
- 注释符号：
  - `-- `：行内注释，符号后的内容就是注释,注意`--`后有一个空格才表示注释;
  - `#`:行内注释，但是此形式很少被支持;
  - `/*`和`*/`：多行注释，中间内容是注释(类其编写语言C和C++)。

