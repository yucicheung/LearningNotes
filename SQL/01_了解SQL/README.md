# 了解SQL
## 摘要
- 介绍什么是SQL
- SQL为什么很有用
- 一些基本的数据库术语

## 约定
书中将提到以下名词，对各名词的解释：
- 说明:给出上下文讨论中比较重要的信息;
- 提示：就某任务给出建议或更简单的方法;
- 注意：提示可能出现的问题;
- *<新术语>*：清晰定义重要的词汇。

## 数据库基础
- *数据库*：保存有组织的数据的容器(通常是一个文件或一组文件)。
- 注意：勿混淆以下概念，
  - 数据库软件：确切叫法是*数据库管理系统(DBMS)*;
  - 数据库：是通过DBMS创建和操纵的容器，其具体内容和形式依数据库不同而不同。
- *表(table)*：某种特定类型数据的结构化清单。
  - 比如说我们只存放顾客的信息，这个就是某种特定类型。
- 说明：表名
  - 要保证*表名*/*数据库和表名等的组合*是唯一的;
  - 同一数据库中不能使用相同的两个表名，但是在不同的数据库中完全可以使用相同表名。
- *模式(schema)*:
  - 描述数据库和表的布局及特性的信息。如，
	- 数据在表中如何存储;
	- 存储什么样的数据;
	- 数据如何分解;
	- 各部分信息如何命名等。
  - 模式可以用来描述数据库中特定的表，也可以用于描述整个数据库(和其中表的关系)。
- *列(column)*:
  - 表中的一个字段;
  - 所有表都是由一个或多个列组成的(表由列组成)。
- 提示：分解数据
  - 正确地将数据分解为多个列极为重要。
	- 通过分解数据，才能利用特定的列对数据进行分类和过滤;
	- 可以依据自己的需求决定把数据分解到何种程度。
- *数据类型*:
  - 所允许的数据的类型,每个表列都有相应的数据类型，它限制(或允许)该列中存储的数据。
	- 数据类型还帮助正确地分类数据，并在优化磁盘使用方面起重要的作用。因此在创建表时必须特别关注所用的数据类型。
- 注意：数据类型兼容
  - 数据类型和其名称是SQL不兼容的一个原因：
	- 虽然大多数基本数据类型得到了一致的支持，但许多高级的数据类型却没有;
	- 甚至可能相同的数据类型在不同DBMS中具有不同名称。
- *行*：
  - 表中的一个记录(表中的数据是按行存储的)。
- 说明：记录/行
  - 行与数据库记录是可以交替使用的，术语上应该叫行。
- *主键*：
  - 一列(或一组列)，其值能够唯一标识表中每一行。
	- 主键用来表示一个特定的行;
	- 没有主键，更新或删除表中特定行就很困难。
- 提示：应该总是定义主键
  - 虽不是必须，但保证每个表具有一个主键会方便以后的数据操作和管理。
- 任何满足以下条件的列都可以作为主键：
  - 任意两行都不具有相同的主键值;
  - 每一行都必须具有一个主键值(主键列不允许NULL值);
  - 主键列中的值不允许修改或更新;
  - 主键值不能重用(如果某行从表中删除，其主键值不能再赋予以后的新行)。
- 主键通常在表的一列上，但也可以一起使用多个列作为主键。
  - 在使用多个列作为主键时，上述条件必须应用到所有列(如各列的组合值必须是唯一的)。
## 什么是SQL
- SQL
  - 发音为字母S-Q-L或sequel;
  - 全称是Structured Query Language(结构化查询语言);
  - 是一种专门用来与数据库沟通的语言。
- SQL的优点：
  - SQL并不是某个特定数据库供应商专有的语言。几乎所有重要的DBMS都支持SQL，因此学习此语言就可以与几乎所有数据库打交道。
  - SQL简单易学。语句由描述性很强的英语单词组成，而且单词数目不多。
  - SQL看起来虽然简单，但通过灵活使用其语言元素，可以进行非常复杂和高级的数据库操作。
- 说明：SQL的扩展
  - DBMS通过增加语句或指令对SQL进行扩展;
  - SQL扩展的目的是提供执行特定操作的额外功能或简化方法;
  - 扩展针对个别DBMS。
- 标准SQL由ANSI标准委员会管理，称为ANSI SQL。
  - 所有主要DBMS都支持ANSI SQL;
  - ANSI SQL是本书主要讲解内容。
- 数据库管理员常使用*关系图*来说明数据库表的关联方式。
  - 这些*关系*是由*外键*定义的。
## MySQL
- 我的运行环境
  - DBMS:MySQL
  - OS:Ubuntu16.04LTS。另外如果安装Oracle SQl Developer也会自动安装MySQL。
### [安装MySQL](https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/#apt-repo-fresh-install)
1. 用`apt`安装`sudo apt install mysql-server`会安装MySQl Server和Client的包，以及数据库常用文件的包。
  - 如要安装客户端界面或者指定安装版本应参考标题链接指向的文档。
2. 安装过程中，会被要求设置root密码，如想以后设置可以留空。

### MySQL Server的简单使用
1. MySQL的启动，停止和重启：
- MySQL Server安装后会自动启动，登录使用以下命令：
```bash
mysql -u root -p
```
- 检查MySQL Server的状态
```bash
sudo service mysql status
```
- 停止MySQL Server
```bash
sudo service mysql stop
```
- 重启MySQl Server
```bash
sudo service mysql start
```
2. MySQL的其他操作，在登录MySQL后，在`mysql>`提示下
- 打开数据库`USE database`;
- 输入mysql语句必须以`;`或`\g`结束;
- 获取命令列表帮助输入`\h`,也可以在后面跟上关键字(含函数)查看用法如`\h select`;
- 查看Server当前状态信息输入`\s`;
- 退出输入`\q`。

### MySQL workbench
MySQL WorkBench是MySQL的客户端程序;
- 安装：`sudo apt install mysql-workbench`;
- 启动：在Dash界面搜索*MySQL Workbench*，点击图标进入;或命令行`mysql-workbench`运行;
- 查看帮助`/usr/bin/mysql-workbench --help`。

### MariaDB与MySQL
- MariaDB数据库管理系统是MySQL的一个分支，由开源社区维护。
- MariaDB能完全兼容MySQL，包括API和命令行，能轻松成为MySQL的代替品。
- MariaBD没有自己的客户端程序，而是使用MySQL的客户端实用程序(完全兼容)。
